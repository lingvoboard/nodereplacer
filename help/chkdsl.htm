<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="files/main.css" />
  <title>ИНСТРУКЦИЯ</title>
</head>
<body>
  <div class="c1">
    <h1>ИНСТРУКЦИЯ К СКРИПТУ nodereplacer.js</h1>
  </div>

  <p>Содержание инструкции:

  <ul>
    <li><a href="index.htm">Общий раздел</a>
    </li>

    <li><a href="replacer.htm">Замены</a>
    </li>

    <li><a href="plugins.htm">Дополнительные плагины</a>
    </li>

    <li><a href="javascript.htm">Раздел для программистов</a>
    </li>

    <li><b>Плагин chkdsl</b>
    </li>
  </ul>

  <pre>


                         Инструкция к плагину chkdsl

 НАЗНАЧЕНИЕ
 Выявление ошибок в словарях в формате DSL.
 Плагин делает почти то же самое, что и Dslcomp.exe, но без компиляции.

 ВАРИАНТЫ КОМАНДНОЙ СТРОКИ:
 node nodereplacer.js -chkdsl input.dsl output.dsl
 node nodereplacer.js -chkdsl -t input.dsl output.dsl

 С ключом -t проверяется находится ли тег [!trs] в зоне индексации.
 Запуск плагина без -t равносилен запуску программы Dslcomp.exe с включённой опцией «Автоматически добавлять разметку, необходимую для поиска по содержимому карточек словаря»

 input.dsl - должен иметь словарную структуру и кодировку UTF8 (с BOM или без) или UTF16LE обязательно с BOM.

 Данной версией плагина поддерживается проверка следующих ошибок:

 * Подвешенная ссылка.
 * Повторный открывающий тег.
 * Отсутствует закрывающий тег.
 * Закрывающий тег при отсутствии открывающего.
 * Использование тегов внутри ссылки на карточку.
 * Использование тегов внутри зоны мультимедиа.
 * Использование тегов внутри URL.
 * Использование тегов внутри зоны транскрипции.
 * Неизвестное имя тега.
 * Отсутствие символа конца имени тега "]".
 * Отсутствие символа начала имени тега "[".
 * Отсутствие открывающих комментарий скобок.
 * Отсутствие закрывающих комментарий скобок.
 * Нахождение тега [!trs] вне пределов зон индексации.
 * Неподдерживаемый язык.
 * Неподдерживаемый идентификатор языка.
 * Неизвестное имя цвета.
 * Отсутствие значения у атрибута тега [lang].
 * Имя языка без кавычек.
 * Отсутствие символа закрытия альтернативной части заголовка ")".
 * Отсутствие символа открытия альтернативной части заголовка "(".
 * Отсутствие символа закрытия несортируемой части заголовка "}".
 * Отсутствие символа открытия несортируемой части заголовка "{".
 * Слишком много альтернативных частей в заголовке, максимально - 6.
 * Повторная обработка заголовка.
 * Не указан язык перевода.
 * Не указан исходный язык.
 * Не указано имя словаря.
 * Пустая строка препроцессора.
 * Неизвестная директива препроцессора.
 * Параметр для директивы препроцессора не заключен в кавычки.
 * Пустая статья.
 * Пустой заголовок карточки.
 * Повторное использование директивы.
 * Неэкранированный символ # в начале строки за пределами блока директив.
 * Имя словаря содержит символы, не входящие в набор ASCII.
 * Значение параметра dict не заключено в кавычки.
 * Значение параметра dict содержит недопустимый символ.
 * Не задано значение параметра тега.
 * Директива препроцессора начинаться не с новой строки.
 * Неправильное использование символа начала подкарточки "@".
 * Подкарточка не окончена.
 * Использование тегов внутри зоны транскрипции.
 * Пустая подкарточка.
 * Пустой подзаголовок.
 * Подкарточка внутри ссылки на карточку.
 * Подкарточка внутри зоны мультимедиа.
 * Подкарточка внутри URL.
 * Подкарточка внутри зоны транскрипции.
 * Слишком длинное слово.
 * Слишком длинный заголовок.
 * Тег "[sup]" не может находиться внутри зоны действия тега "[sub]".
 * Тег "[sub]" не может находиться внутри зоны действия тега "[sup]".
 * Заголовок целиком состоит из альтернативной части.
 * Использование символа начала имени тега "[" недопустимо внутри ссылки.
 * Отсутствует тег открытия ссылки "&lt;&lt;".
 * В заголовке присутствуют символы, не поддерживаемые в данном языке.
 _______________________________________

 ПРИМЕЧАНИЯ
 
 Предупреждение "В заголовке присутствуют символы, не поддерживаемые в данном языке" генерируется если:
 
 а)Директива #INDEX_LANGUAGE имеет одно из следующих значений:
 
 Afrikaans, Czech, Danish, Dutch, English, Estonian, Finnish, French, GermanNewSpelling, German, Hungarian,
 Icelandic, Italian, Latin, Latvian,Lithuanian, NorwegianBokmal, NorwegianNynorsk, Polish, PortugueseStandard,
 Romanian, Slovak, Slovenian, SpanishModernSort, SpanishTraditionalSort, Swedish, Turkish
 
 б)И при этом в заголовках имеются символы, которые не входят в "Basic Latin", "Latin-1 Supplement", "Latin Extended-A" или "Latin Extended-B".

 Ссылка:
 https://en.wikipedia.org/wiki/Latin_script_in_Unicode 
 
 _______________________________________

 Тег [m] не проверяется на закрытие или повторное открытие.

 _______________________________________

 В отличие от Dslcomp.exe плагин генерирует ошибку если встречает тег [br] между тегами [ref][/ref], &lt;&lt;&gt;&gt;, [s][/s], [url][/url], [t][/t]
 [br] - недокументированный тег, который впервые начинает признавать компилятор DSL к Lingvo версии x5 (15.0)
 _______________________________________
 
 Пока не поддерживается:

 * Правильная проверка ссылок с неэкранированными ~ и ^.
   Неэкранированный символ ~ в теле карточки меняется на заголовок, а неэкранированный символ ^ меняет регистр следующего символа.
   Плагин это не учитывает при проверке.  

 * Предупреждение: «Символ "\" в конце строки не имеет силы и игнорируется.»

 * Предупреждение: "Изображение для значка словаря имеет неправильные размеры. Правильные размеры изображения: 14 х 21 пикселов."

 _______________________________________

 "Слишком длинное слово" -  последовательность более чем 255 непробельных символов (\S{255,}).
 При подсчёте длины "слова" в карточке не учитываются символ экранирования и теги DSL.
 
 При измерении длины заголовка учитываются все символы (символ экранирования и символы из которых состоят теги).
 Заголовок статьи не должен быть длиннее 246 символов.
 
 Закомментированные части в заголовках плагином (как и Dslcomp.exe) игнорируются.

 Пример:
 
 Длина заголовка "{{комментарий 1}}dog{{комментарий 2}}" - 3.   
 
 При измерении длины "слов" в карточках комментарии также игнорируются.   

 _______________________________________
 
 Плагин не считает ошибкой наличие пустых строк между альтернативными заголовками сложенными в стопу 
 и наличие пустых строк между заголовком и первой строкой тела статьи.
 Это допускает DSL формат.
 
 Пример:
 
 |dog1
 |
 |dog2
 |
 |      перевод

 _______________________________________


 ПРИМЕР
 
 Abkunft
        [m2] [c maroon][u]A[/u]bkunft[/c][/b]{{=Ошибка: Закрывающий тег при отсутствии открывающего.}}[/m]
        [m1][c slateblue]〈v.; Abkunft, Abkünfte〉[/c] [/i]{{=Ошибка: Закрывающий тег при отсутствии открывающего.}}[/m]
        [m1][c test]{{=Ошибка: Неизвестное имя цвета: "test".}} 1 [/c][b][i]afkomst[/i][/b] ⇒ [i]herkomst, oorsprong[/i][/m]

 Abkunft
 {{=Ошибка: Заголовок "Abkunft" уже обработан.}}
        &lt;&lt;test&gt;&gt;{{=Предупреждение: Подвешенная ссылка "test".}}


</pre>

  <hr />
</body>
</html>
