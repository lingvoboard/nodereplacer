<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="files/main.css" />
  <title>–ò–ù–°–¢–†–£–ö–¶–ò–Ø</title>
  <style type="text/css">
  /*<![CDATA[*/
  ul.c1 {list-style-type:decimal}
  /*]]>*/
  </style>
</head>
<body>
  <div class="c1">
    <h1>–ò–ù–°–¢–†–£–ö–¶–ò–Ø –ö –°–ö–†–ò–ü–¢–£ nodereplacer.js</h1>
  </div>

  <p>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</p>

  <ul>
    <li><a href="index.htm">–û–±—â–∏–π —Ä–∞–∑–¥–µ–ª</a>
    </li>

    <li><a href="replacer.htm">–ó–∞–º–µ–Ω—ã</a>
    </li>

    <li><a href="plugins.htm">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã</a>
    </li>

    <li><b>–†–∞–∑–¥–µ–ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤</b>
    </li>
  </ul>

  <div class="c1">
    –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï JAVASCRIPT –ö–û–î–ê –í –°–ü–ò–°–ö–ï –ó–ê–ú–ï–ù
  </div>

  <div class="Achtung">
    <br />
    –ß—Ç–æ–±—ã —Å–∫—Ä–∏–ø—Ç –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏–ª javascript –∫–æ–¥ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–º–µ–Ω:
    <p>–ù–µ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä || —Å —Ç–∞–±—É–ª—è—Ç–æ—Ä–∞–º–∏ –¥–æ –∏ –ø–æ—Å–ª–µ, –∏–Ω–∞—á–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ—Ç –µ–≥–æ –∑–∞ —á–∞—Å—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –≤ –º–∞–∫—Ä–æ—Å–µ (—Å–º. —Ä–∞–∑–¥–µ–ª <a href="replacer.htm">"–ó–∞–º–µ–Ω—ã"</a>).</p>
  </div>

  <p><span class="subs">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞</span>:</p>

  <ul class="c1">
    <li><a href="#objo">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ o</a>
    </li>

    <li><a href="#null">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ null</a>
    </li>

    <li><a href="#res">–ú–∞—Å—Å–∏–≤ o.res, —Ñ—É–Ω–∫—Ü–∏—è onexit –∏ onstart</a>
    </li>

    <li><a href="#outils">–ú–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–∞ o.utils</a>
    </li>

    <li><a href="#htmlcl">–ú–æ–¥—É–ª—å htmlclean</a>
    </li>

    <li><a href="#plug">–ü–ª–∞–≥–∏–Ω—ã</a>
    </li>

    <li><a href="#test">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
    </li>

    <li><a href="#exam">–ü—Ä–∏–º–µ—Ä—ã –∏ —Å–Ω–∏–ø–ø–µ—Ç—ã</a>
    </li>

    <li><a href="#npmjs">–í–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏ (npmjs.com)</a>
    </li>

    <li><a href="#other">–†–∞–∑–Ω–æ–µ</a>
    </li>
  </ul>

  <hr />

  <p><span class="func">s</span> - –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—É—é —Å–∫—Ä–∏–ø—Ç–æ–º —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Å—Ç–∞—Ç—å—é.</p>

  <p><span><a class="mark" href="#objo" id="objo" name="objo">#</a></span> <span class="subs">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ o</span></p>

  <p>–ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –°–í–û–ô–°–¢–í</p>

  <ul>
    <li><a href="#oarr">o.arr</a>
    </li>

    <li><a href="#obom">o.bom</a>
    </li>

    <li><a href="#obyline">o.byline</a>
    </li>

    <li><a href="#obygls">o.by_gls_article</a>
    </li>

    <li><a href="#obydsl">o.by_dsl_article</a>
    </li>

    <li><a href="#ocount">o.count</a>
    </li>

    <li><a href="#odsl">o.dsl</a>
    </li>

    <li><a href="#oeol">o.eol</a>
    </li>

    <li><a href="#oeolmode">o.eol_mode</a>
    </li>

    <li><a href="#oentire">o.entirefile</a>
    </li>

    <li><a href="#oelog">o.error_log_path</a>
    </li>

    <li><a href="#oeta">o.et_auto</a>
    </li>

    <li><a href="#oetsh">o.et_show</a>
    </li>

    <li><a href="#ogls">o.gls</a>
    </li>

    <li><a href="#oinen">o.in_encoding</a>
    </li>

    <li><a href="#oinf">o.inputfile</a>
    </li>

    <li><a href="#olog">o.log</a>
    </li>

    <li><a href="#oloop">o.loop</a>
    </li>

    <li><a href="#omode">o.mode</a>
    </li>

    <li><a href="#ooutf">o.outputfile</a>
    </li>

    <li><a href="#oouten">o.out_encoding</a>
    </li>

    <li><a href="#oprb">o.progress_bar</a>
    </li>

    <li><a href="#oprbt">o.progress_bar_title</a>
    </li>

    <li><a href="#opath">o.path</a>
    </li>

    <li><a href="#orep">o.repeat</a>
    </li>

    <li><a href="#ores">o.res</a>
    </li>

    <li><a href="#ostop">o.stop</a>
    </li>

    <li><a href="#otab">o.tab</a>
    </li>

    <li><a href="#outl">o.utils</a>
    </li>

    <li><a href="#outlp">o.utilspath</a>
    </li>
  </ul>

  <p><span><a class="mark" href="#oarr" id="oarr" name="oarr">#</a></span> <span class="func">o.arr</span> - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π.</p>

  <p><span><a class="mark" href="#obom" id="obom" name="obom">#</a></span> <span class="func">o.bom</span> - BOM (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç '\uFEFF').</p>

  <p><span><a class="mark" href="#obyline" id="obyline" name="obyline">#</a></span> <span class="func">o.byline</span> - —Ñ—É–Ω–∫—Ü–∏—è <span class="comline">byline</span> –∏–∑ nodereplacer.js</p>

  <p><span><a class="mark" href="#obygls" id="obygls" name="obygls">#</a></span> <span class="func">o.by_gls_article</span> - —Ñ—É–Ω–∫—Ü–∏—è <span class="comline">by_gls_article</span> –∏–∑ nodereplacer.js</p>

  <p><span><a class="mark" href="#obydsl" id="obydsl" name="obydsl">#</a></span> <span class="func">o.by_dsl_article</span> - —Ñ—É–Ω–∫—Ü–∏—è <span class="comline">by_dsl_article</span> –∏–∑ nodereplacer.js</p>

  <p><span><a class="mark" href="#ocount" id="ocount" name="ocount">#</a></span> <span class="func">o.count</span> - —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —Å—Ç–∞—Ç—å–∏.</p>

  <p><span><a class="mark" href="#odsl" id="odsl" name="odsl">#</a></span> <span class="func">o.dsl</span> - –≤ —Ä–µ–∂–∏–º–µ –ø–æ—Å—Ç–∞—Ç–µ–π–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ DSL —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Å–æ —Å—Ç–∞—Ç—å—ë–π.<br />
  1. –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç (<b>o.dsl[0]</b>) - –º–∞—Å—Å–∏–≤ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ (–≤—Å—è –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω–∞—è —á–∞—Å—Ç—å —Å—Ç–∞—Ç—å–∏).<br />
  2. –í—Ç–æ—Ä–æ–π (<b>o.dsl[1]</b>) - —Ç–µ–ª–æ —Å—Ç–∞—Ç—å–∏ (–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π).<br />
  3. –¢—Ä–µ—Ç–∏–π (<b>o.dsl[2]</b>) - –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ (–±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫).<br />
  4. –ß–µ—Ç–≤—ë—Ä—Ç—ã–π (<b>o.dsl[3]</b>) - –º–∞—Å—Å–∏–≤ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ —Ç–µ–ª–∞. –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.</p>

  <p><span><a class="mark" href="#oeol" id="oeol" name="oeol">#</a></span> <span class="func">o.eol</span> - —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª(—ã), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —Å—Ç–∞—Ç—å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é \n).</p>

  <p><span><a class="mark" href="#oeolmode" id="oeolmode" name="oeolmode">#</a></span> <span class="func">o.eol_mode</span> - –µ—Å–ª–∏ —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <b>1</b>, —Ç–æ <span class="highlight">–≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ</span> —á—Ç–µ–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –±—É–¥—É—Ç –ø–∏—Å–∞—Ç—å—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Å—Ç—Ä–æ–∫ (<a href="#eol1">–ø–æ–¥—Ä–æ–±–Ω–µ–µ</a>)<br />
  –ï—Å–ª–∏ <b>2</b>, —Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞—Ä—Ç–∞ —Å–º–µ—â–µ–Ω–∏–π –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. (<a href="#eol2">–ø–æ–¥—Ä–æ–±–Ω–µ–µ</a>)</p>

  <p><span><a class="mark" href="#oentire" id="oentire" name="oentire">#</a></span> <span class="func">o.entirefile</span> - —Ñ—É–Ω–∫—Ü–∏—è <span class="comline">entirefile</span> –∏–∑ nodereplacer.js</p>

  <p><span><a class="mark" href="#oelog" id="oelog" name="oelog">#</a></span> <span class="func">o.error_log_path</span> - c–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É <span class="comline">error.log</span>. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ —Å –≤—ã—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º, –Ω–æ <span class="comline">error.log</span> –∏ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –º–æ–≥—É—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –µ—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–º–µ–Ω –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–µ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ <span class="comline">o.outputfile</span>.</p>

  <p><span><a class="mark" href="#oeta" id="oeta" name="oeta">#</a></span> <span class="func">o.et_auto</span> - —É–ø—Ä–∞–≤–ª—è—é—â–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <span class="func">true</span> (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏–µ), —Ç–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>

  <p>–ï—Å–ª–∏ <span class="comline">false</span>, —Ç–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è.</p>

  <p><span><a class="mark" href="#oetsh" id="oetsh" name="oetsh">#</a></span> <span class="func">o.et_show</span> - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞.</p>

  <p><span><a class="mark" href="#ogls" id="ogls" name="ogls">#</a></span> <span class="func">o.gls</span> - –≤ —Ä–µ–∂–∏–º–µ –ø–æ—Å—Ç–∞—Ç–µ–π–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ GLS —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Å–æ —Å—Ç–∞—Ç—å—ë–π. –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç - —Å—Ç—Ä–æ–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–æ–º "|". –í—Ç–æ—Ä–æ–π - —Ç–µ–ª–æ —Å—Ç–∞—Ç—å–∏. –¢—Ä–µ—Ç–∏–π - –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏.</p>

  <p><span><a class="mark" href="#oinen" id="oinen" name="oinen">#</a></span> <span class="func">o.in_encoding</span> - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é utf8).</p>

  <p><span><a class="mark" href="#oinf" id="oinf" name="oinf">#</a></span> <span class="func">o.inputfile</span> - –∏–º—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.</p>

  <p><span><a class="mark" href="#olog" id="olog" name="olog">#</a></span> <span class="func">o.log</span> - –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π.</p>

  <p><span><a class="mark" href="#oloop" id="oloop" name="oloop">#</a></span> <span class="func">o.loop</span> - —Å—á–µ—Ç—á–∏–∫, –∑–Ω–∞—á–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π <span class="comline">byline</span>, <span class="comline">by_dsl_article</span>, <span class="comline">entirefile</span> –∏–ª–∏ <span class="comline">by_gls_article</span></p>

  <p><span><a class="mark" href="#omode" id="omode" name="omode">#</a></span> <span class="func">o.mode</span> - –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: '<span class="comline">byline</span>', '<span class="comline">by_dsl_article</span>', '<span class="comline">by_gls_article</span>', '<span class="comline">entirefile</span>'<br />
  <i>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ nodereplacer.js (–ò–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ —Å–ø–∏—Å–∫–∞—Ö –∑–∞–º–µ–Ω –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–∞—Ö –Ω–µ—Ç —Å–º—ã—Å–ª–∞.)</i></p>

  <p><span><a class="mark" href="#ooutf" id="ooutf" name="ooutf">#</a></span> <span class="func">o.outputfile</span> - –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.</p>

  <p><span><a class="mark" href="#oouten" id="oouten" name="oouten">#</a></span> <span class="func">o.out_encoding</span> - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é utf8).</p>

  <p><span><a class="mark" href="#oprb" id="oprb" name="oprb">#</a></span> <span class="func">o.progress_bar</span> - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (progressbar).<br />
  –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <span class="comline">true</span><br />
  –û—Ç–∫–ª—é—á–µ–Ω–∏–µ: <i>o.progress_bar = false;</i></p>

  <p><span><a class="mark" href="#oprbt" id="oprbt" name="oprbt">#</a></span> <span class="func">o.progress_bar_title</span> - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–∞–¥ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.<br />
  –ü—Ä–∏–º–µ—Ä: <i>o.progress_bar_title = 'Reading file:\n';</i></p>

  <p><span><a class="mark" href="#opath" id="opath" name="opath">#</a></span> <span class="func">o.path</span> - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç.</p>

  <p><span><a class="mark" href="#orep" id="orep" name="orep">#</a></span> <span class="func">o.repeat</span> - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π <span class="comline">byline</span>, <span class="comline">by_dsl_article</span>, <span class="comline">entirefile</span> –∏–ª–∏ <span class="comline">by_gls_article</span></p>

  <p><span><a class="mark" href="#ores" id="ores" name="ores">#</a></span> <span class="func">o.res</span> - –º–∞—Å—Å–∏–≤, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –ø–∏—à–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª (–µ—Å–ª–∏ –Ω–µ –ø—É—Å—Ç–æ–π).</p>

  <p><span><a class="mark" href="#ostop" id="ostop" name="ostop">#</a></span> <span class="func">o.stop</span> - –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç, –Ω–æ –µ—Å–ª–∏ –≤ –Ω–µ–µ —á—Ç–æ-—Ç–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å, —Ç–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –≤—ã–≤–µ–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞ —ç–∫—Ä–∞–Ω.</p>

  <p><span><a class="mark" href="#otab" id="otab" name="otab">#</a></span> <span class="func">o.tab</span> - –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç (<i>o.tab = Object.create(null)</i>), –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π.</p>

  <p><span><a class="mark" href="#outl" id="outl" name="outl">#</a></span> <span class="func">o.utils</span> - –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä—è–¥ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ (<a href="#outils">–ø–æ–¥—Ä–æ–±–Ω–µ–µ</a>)</p>

  <p><span><a class="mark" href="#outlp" id="outlp" name="outlp">#</a></span> <span class="func">o.utilspath</span> - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É—Ç—å –∫ <i>/nodereplacer/files/rep_modules/utils</i></p>

  <p>–ï—Å–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞), —Ç–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç <span class="comline">o</span>.</p>

  <p><span><a class="mark" href="#null" id="null" name="null">#</a></span> <span class="subs">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ null</span></p>

  <p>–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–≤–∞–µ–º–∞—è —Å–∫—Ä–∏–ø—Ç–æ–º –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ–Ω –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É (<span class="func">s</span> = ''), —Ç–æ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <span class="func">o.eol</span>.<br />
  –ï—Å–ª–∏ <span class="func">o.eol</span> –Ω–µ –ø—É—Å—Ç–∞—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∏—Ç \n), —Ç–æ –ø–æ—è–≤–∏—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞.<br />
  –ï—Å–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–∞, —Ç–æ —Å–ª–µ–¥—É–µ—Ç –ª–∏–±–æ –æ—á–∏—Å—Ç–∏—Ç—å <span class="func">o.eol</span> –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è replace –≤–µ—Ä–Ω—É–ª–∞ null (<span class="func">s</span> = null).</p>

  <p><span><a class="mark" href="#res" id="res" name="res">#</a></span> <span class="subs">–ú–∞—Å—Å–∏–≤ o.res, —Ñ—É–Ω–∫—Ü–∏—è onexit –∏ onstart</span></p>

  <p>–í –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã (–ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –∏–ª–∏ —Å—Ç–∞—Ç–µ–π) —Å–∫—Ä–∏–ø—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∞—Å—Å–∏–≤–∞ <span class="func">o.res</span> –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª (–µ—Å–ª–∏ –æ–Ω –Ω–µ –ø—É—Å—Ç–æ–π).</p>

  <p>–í –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç —Ç–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ —Ñ—É–Ω–∫—Ü–∏—é <span class="func">onexit</span>, –µ—Å–ª–∏ —Ç–∞–∫–∞—è –∏–º–µ–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∑–∞–º–µ–Ω.<br />
  –ü—Ä–∏ —ç—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ–Ω –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.<br />
  –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ, –∫ –ø—Ä–∏–º–µ—Ä—É, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –º–∞—Å—Å–∏–≤–µ <span class="func">o.res</span> –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ç.–ø.).</p>

  <p>–§—É–Ω–∫—Ü–∏—è <span class="func">o.onstart</span> –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–µ–∂–¥–µ —á–µ–º —Å–∫—Ä–∏–ø—Ç –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º.</p>

  <p><span><a class="mark" href="#outils" id="outils" name="outils">#</a></span> <span class="subs">–ú–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–∞ o.utils</span><br />
  <i>–ö–æ–¥ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–µ /nodereplacer/files/rep_modules/utils/index.js</i></p>

  <p>–ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –ú–ï–¢–û–î–û–í</p>

  <ul class="c1">
    <li><a href="#init">init_cheerio</a>
    </li>

    <li><a href="#nhtml">normalizeHTML</a> - <span class="comment">–º–µ–Ω—è–µ—Ç [\f\n\r\t\v ]+ –Ω–∞ –ø—Ä–æ–±–µ–ª</span></li>

    <li><a href="#dehtml">decodeHTML</a> - <span class="comment">–¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç HTML —Å—É—â–Ω–æ—Å—Ç–∏ (<a href="https://www.npmjs.com/package/entities">entities</a>)</span></li>

    <li><a href="#enhtml">encodeHTML</a> - <span class="comment">–∫–æ–¥–∏—Ä—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ HTML —Å—É—â–Ω–æ—Å—Ç–∏ (<a href="https://www.npmjs.com/package/entities">entities</a>)</span></li>

    <li><a href="#dechst">decode</a> - <span class="comment">–º–µ–Ω—è–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É —Ç–µ–∫—Å—Ç–∞ (<a href="https://github.com/ashtuchkin/iconv-lite">iconv-lite</a>)</span></li>

    <li><a href="#removeodd">remove_odd_slash</a> - <span class="comment">—É–¥–∞–ª—è–µ—Ç –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–ª–µ—à–∏</span></li>

    <li><a href="#removecom">remove_comments</a> - <span class="comment">—É–¥–∞–ª—è–µ—Ç {{–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π}}</span></li>

    <li><a href="#removescb">remove_scb</a> - <span class="comment">—É–¥–∞–ª—è–µ—Ç {—Ç–µ–∫—Å—Ç} (scb = single curly brackets)</span></li>

    <li><a href="#guess">guessEncoding</a> - <span class="comment">–ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–∞ (utf8 –∏–ª–∏ utf16le)</span></li>

    <li><a href="#fileexi">fileExists</a>
    </li>

    <li><a href="#openround">openroundbrackets</a> - <span class="comment">–∫–æ—à–∫–∞(–º–∏) =&gt; –∫–æ—à–∫–∞ –∏ –∫–æ—à–∫–∞–º–∏</span></li>

    <li><a href="#filtergls">filter_gls_hw_list</a> - <span class="comment">–∫–æ—Ç|–∫–æ—Ç–∞–º–∏|–∫–æ—Ç =&gt; –∫–æ—Ç|–∫–æ—Ç–∞–º–∏ (hw = headword)</span></li>

    <li><a href="#spinner_start">spinner_start</a>
    </li>

    <li><a href="#spinner_stop">spinner_stop</a>
    </li>
  </ul>

  <p>–ü–û–î–†–û–ë–ù–û–°–¢–ò</p>

  <p><span><a class="mark" href="#init" id="init" name="init">#</a></span> <span class="comline">init_cheerio(html, options)</span><br />
  <span><a class="mark" href="#init" id="init_old" name="init_old">#</a></span> <span class="comline">init_cheerio_old(html, options)</span><br />
  <span><a class="mark" href="#init" id="init_new" name="init_new">#</a></span> <span class="comline">init_cheerio_new(html, options, isDocument)</span></p>
  <p>–° –Ω–µ–¥–∞–≤–Ω–∏—Ö –ø–æ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å <a href="https://github.com/cheeriojs/cheerio" target="_blank">cheerio</a> –ø—Ä–∏—Ç–µ—Ä–ø–µ–ª <a href="https://github.com/cheeriojs/cheerio/blob/1.0.0-rc.2/History.md#100-rc2--2017-07-02" target="_blank">—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</a>, –ø–æ–≤–ª–µ–∫—à–∏–µ –∑–∞ —Å–æ–±–æ–π —á–∞—Å—Ç–∏—á–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é <strong>–Ω–µ</strong>—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.<br />
  –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ —ç—Ç–æ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ <a href="https://github.com/inikulin/parse5" target="_blank">parse5</a> –∏, –≤ —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º, <strong>–Ω–µ</strong>–ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ü–∏–π —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å—É–µ–º–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ <a href="https://github.com/fb55/htmlparser2" target="_blank">htmlparser2</a>.<br />
  –£–∫–∞–∑–∞–Ω–Ω—ã–µ –≤—ã—à–µ –º–µ—Ç–æ–¥—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É —ç—Ç–æ–π –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä—Å–µ—Ä, —Ç–∞–∫ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–ø—Ü–∏–∏.</p>

  <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</p>

  <pre>
/*
  —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ cheerio
  –ø—Ä–∏ —ç—Ç–æ–º –æ–ø—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
  { decodeEntities: false,
    normalizeWhitespace: true,
    withDomLvl1: true,
    xml: false }
  –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä—Å–µ—Ä - htmlparser2
*/
//let $ = o.utils.init_cheerio(s);

/*
  –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∏–¥–µ–Ω—Ç–∏—á–Ω–∞—è init_cheerio
  –ø—Ä–∏ —ç—Ç–æ–º –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –æ–ø—Ü–∏–∏, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç –¥–µ—Ñ–ª–æ—Ç–Ω—ã—Ö:
  { decodeEntities: true,
    normalizeWhitespace: false }
  –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è htmlparser2
*/
//let $ = o.utils.init_cheerio_old(s, {decodeEntities: true, normalizeWhitespace: false});

/*
  –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º parse5
  –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏ –ø—Ä–µ–∂–Ω–∏–µ
  –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
  –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏–±–æ –∫–∞–∫ Document, –ª–∏–±–æ –∫–∞–∫ DocumentFragment
*/
//let $ = o.utils.init_cheerio_new(s);

/*
  –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º parse5
  –∏ –æ—Ç–ª–∏—á–Ω–æ–π –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –æ–ø—Ü–∏–µ–π
  –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
*/
//let $ = o.utils.init_cheerio_new(s, {normalizeWhitespace: false});

/*
  –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º parse5,
  –æ—Ç–ª–∏—á–Ω–æ–π –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –æ–ø—Ü–∏–µ–π
  –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ–∂–∏–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
  –≤ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–µ—Ç—å–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º false
  –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ä–µ–∂–∏–º DocumentFragment, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
*/
//let $ = o.utils.init_cheerio_new(s, {normalizeWhitespace: false}, true);

/*
  –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º parse5,
  –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
  –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ–∂–∏–º–∞ DocumentFragment
*/
//let $ = o.utils.init_cheerio_new(s, {}, false);
let $ = o.utils.init_cheerio_new(s, null, false);


//$('.foo').reptag('[test]', '[/test]');
//$('.foo').changeTag('test');
//$('.foo').unwrap();
$('.foo').wrapAll('<test><inner></inner></test>');
s = $.html();
</pre>
  <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä, —Ç–∞–∫–∂–µ, –¥–æ–±–∞–≤–ª—è–µ—Ç —á–µ—Ç—ã—Ä–µ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ cheerio:</p>

  <p><span class="comline">unwrap,<br />
  wrapAll,<br />
  reptag,<br />
  changeTag</span>
  </p>

  <p>–ü–µ—Ä–≤—ã–µ –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –¥–µ–ª–∞—é—Ç —Ç–æ –∂–µ, —á—Ç–æ –∏ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã JQuery.<br />
  –¢—Ä–µ—Ç–∏–π (<span class="comline">reptag</span>) –∞–Ω–∞–ª–æ–≥–æ–≤ –≤ JQuery –Ω–µ –∏–º–µ–µ—Ç –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –∑–∞–º–µ–Ω—ã —Ç–µ–≥–æ–≤.</p>

  <p>–ü—Ä–∏–º–µ—Ä:</p>

  <pre>
<span class="line-comment">//–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:</span>
<span class="line-comment">//&lt;span class="italic"&gt;aaa&lt;/span&gt;&lt;span class="italic"&gt;bbb&lt;/span&gt;</span>
<span class="line-comment">//–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: rep -rt list input.txt output.txt</span>

<span class="keyword">let</span> <span class="identifier">$</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">init_cheerio</span><span class="bold">(</span><span class="identifier">s</span><span class="bold">);

</span><span class="identifier">$</span><span class="bold">(</span><span class="string">'.italic'</span><span class="bold">).</span><span class="identifier">reptag</span><span class="bold">(</span><span class="string">'[i]'</span><span class="bold">, </span><span class="string">'[/i]'</span><span class="bold">);

</span><span class="identifier">s</span> <span class="operator">=</span> <span class="identifier">$</span><span class="bold">.</span><span class="identifier">html</span><span class="bold">();

</span><span class="line-comment">//–†–µ–∑—É–ª—å—Ç–∞—Ç:</span>
<span class="line-comment">//[i]aaa[/i][i]bbb[/i]</span>
</pre>

  <p>–ú–µ—Ç–æ–¥ <span class="comline">changeTag</span> –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–º–µ–Ω—ã –∏–º–µ–Ω–∏ —Ç–µ–≥–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∞—Ç—Ä–∏–±—É—Ç–æ–≤.</p>

  <p>–ü—Ä–∏–º–µ—Ä:</p>

  <pre>
<span class="line-comment">//–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:</span>
<span class="line-comment">//&lt;span class="italic"&gt;aaa&lt;/span&gt;&lt;span class="italic"&gt;bbb&lt;/span&gt;</span>
<span class="line-comment">//–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: rep -rt list input.txt output.txt</span>

<span class="keyword">let</span> <span class="identifier">$</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">init_cheerio</span><span class="bold">(</span><span class="identifier">s</span><span class="bold">);

</span><span class="identifier">$</span><span class="bold">(</span><span class="string">'.italic'</span><span class="bold">).</span><span class="identifier">changeTag</span><span class="bold">(</span><span class="string">'test'</span><span class="bold">);

</span><span class="identifier">s</span> <span class="operator">=</span> <span class="identifier">$</span><span class="bold">.</span><span class="identifier">html</span><span class="bold">();

</span><span class="line-comment">//–†–µ–∑—É–ª—å—Ç–∞—Ç:</span>
<span class="line-comment">//&lt;test class="italic"&gt;aaa&lt;/test&gt;&lt;test class="italic"&gt;bbb&lt;/test&gt;</span>
</pre>

  <p><span><a class="mark" href="#nhtml" id="nhtml" name="nhtml">#</a></span> <span class="comline">normalizeHTML(str)</span></p>

  <p>–ö–æ–¥ –º–µ—Ç–æ–¥–∞:</p>

  <pre>
<span class="identifier">normalizeHTML</span><span class="bold">(</span><span class="param">str</span><span class="bold">) {
        </span><span class="keyword">const</span> <span class="identifier">pattern1</span> <span class="operator">=</span> <span class="regularexpression">/[\f\n\r\t\v ]+/g</span><span class="bold">;
        </span><span class="identifier">str</span> <span class="operator">=</span> <span class="identifier">str</span><span class="bold">.</span><span class="identifier">replace</span><span class="bold">(</span><span class="identifier">pattern1</span><span class="bold">, </span><span class="string">' '</span><span class="bold">);
        </span><span class="control-flow">return</span> <span class="identifier">str</span><span class="bold">;
}</span>
</pre>
  <p><span><a class="mark" href="#dehtml" id="dehtml" name="dehtml">#</a></span> <span class="comline">decodeHTML(str)</span></p>

  <p>–ö–æ–¥ –º–µ—Ç–æ–¥–∞:</p>

  <pre>
<span class="identifier">decodeHTML</span><span class="bold">(</span><span class="param">str</span><span class="bold">) {
        </span><span class="control-flow">return</span> <span class="identifier">require</span><span class="bold">(</span><span class="string">'entities'</span><span class="bold">).</span><span class="identifier">decodeHTML</span><span class="bold">(</span><span class="identifier">str</span><span class="bold">);
}</span>
</pre>
  <p><span><a class="mark" href="#enhtml" id="enhtml" name="enhtml">#</a></span> <span class="comline">encodeHTML(str)</span></p>

  <p>–ö–æ–¥ –º–µ—Ç–æ–¥–∞:</p>

  <pre>
<span class="identifier">encodeHTML</span><span class="bold">(</span><span class="param">str</span><span class="bold">) {
        </span><span class="control-flow">return</span> <span class="identifier">require</span><span class="bold">(</span><span class="string">'entities'</span><span class="bold">).</span><span class="identifier">encodeHTML</span><span class="bold">(</span><span class="identifier">str</span><span class="bold">);
}</span>
</pre>
  <p><span><a class="mark" href="#dechst" id="dechst" name="dechst">#</a></span> <span class="comline">decode(str, charset)</span></p>

  <p>–ö–æ–¥ –º–µ—Ç–æ–¥–∞:</p>

  <pre>
<span class="identifier">decode</span><span class="bold">(</span><span class="param">str</span><span class="bold">, </span><span class="param">charset</span><span class="bold">) {
        </span><span class="control-flow">return</span> <span class="identifier">require</span><span class="bold">(</span><span class="string">'iconv-lite'</span><span class="bold">).</span><span class="identifier">decode</span><span class="bold">(</span><span class="identifier">str</span><span class="bold">, </span><span class="identifier">charset</span><span class="bold">);
}</span>
</pre>
  <p><span><a class="mark" href="#removeodd" id="removeodd" name="removeodd">#</a></span> <span class="comline">remove_odd_slash(str, a)</span></p>

  <p>–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å–ª–µ—à–µ–π (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ —á—ë—Ç–Ω–æ—Å—Ç—å)</p>

  <p>–ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç "a" –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <span class="comline">true</span>, —Ç–æ:</p>

  <pre>
        <span class="identifier">s</span> <span class="operator">=</span> <span class="identifier">s</span><span class="bold">.</span><span class="identifier">replace</span><span class="bold">(</span><span class="regularexpression">/(\\*)/g</span><span class="bold">, </span><span class="keyword">function</span><span class="bold">(</span><span class="param">a</span><span class="bold">, </span><span class="param">m1</span><span class="bold">) { </span><span class="control-flow">if</span><span class="bold"> ((</span><span class="identifier">m1</span><span class="bold">.</span><span class="identifier">length</span> <span class="operator">%</span> <span class="numeric">2</span><span class="bold">) </span><span class="operator">===</span> <span class="numeric">1</span><span class="bold">) </span><span class="identifier">m1</span> <span class="operator">=</span> <span class="identifier">m1</span><span class="bold">.</span><span class="identifier">slice</span><span class="bold">(</span><span class="numeric">0</span><span class="bold">, </span><span class="operator">-</span><span class="numeric">1</span><span class="bold">); </span><span class="control-flow">return</span> <span class="identifier">m1</span><span class="bold">; });</span>
</pre>
  <p>–ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç–æ</p>

  <pre>
        <span class="identifier">s</span> <span class="operator">=</span> <span class="identifier">s</span><span class="bold">.</span><span class="identifier">replace</span><span class="bold">(</span><span class="regularexpression">/(\\*)([@#\^~\[\]\{\}\(\)])/g</span><span class="bold">,  </span><span class="keyword">function</span><span class="bold">(</span><span class="param">a</span><span class="bold">, </span><span class="param">m1</span><span class="bold">, </span><span class="param">m2</span><span class="bold">){</span><span class="control-flow">if</span><span class="bold"> ((</span><span class="identifier">m1</span><span class="bold">.</span><span class="identifier">length</span> <span class="operator">%</span> <span class="numeric">2</span><span class="bold">) </span><span class="operator">===</span> <span class="numeric">1</span><span class="bold">) </span><span class="identifier">m1</span> <span class="operator">=</span> <span class="identifier">m1</span><span class="bold">.</span><span class="identifier">slice</span><span class="bold">(</span><span class="numeric">0</span><span class="bold">, </span><span class="operator">-</span><span class="numeric">1</span><span class="bold">); </span><span class="control-flow">return</span> <span class="identifier">m1</span> <span class="operator">+</span> <span class="identifier">m2</span><span class="bold">; });</span>
</pre>
  <p><span><a class="mark" href="#removecom" id="removecom" name="removecom">#</a></span> <span class="comline">remove_comments(str)</span></p>

  <p>–£–¥–∞–ª—è–µ—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ - {{–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π}}</p>

  <p><span><a class="mark" href="#removescb" id="removescb" name="removescb">#</a></span> <span class="comline">remove_scb(str)</span> (<i>scb - —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—Ç single curly braces</i>)</p>

  <p>–£–¥–∞–ª—è–µ—Ç {—Ç–µ–∫—Å—Ç}</p>

  <p><span><a class="mark" href="#guess" id="guess" name="guess">#</a></span> <span class="comline">guessEncoding(path)</span></p>

  <p>–ü—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É —É–∫–∞–∂–∞–Ω–Ω–æ–≥–æ –≤ <span class="comline">path</span> —Ñ–∞–π–ª–∞ (UTF-16LE –∏–ª–∏ UTF-8).</p>

  <p>–í —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤ —Ñ–∞–π–ª–µ BOM –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω—ë—Ç <span class="comline">utf8</span></p>

  <p><span><a class="mark" href="#openround" id="openround" name="openround">#</a></span> <span class="comline">openroundbrackets(h, cb)</span></p>

  <p>–†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∫—Ä—ã–≥–ª—ã–µ —Å–∫–æ–±–æ–∫–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö.</p>

  <p><i>–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–∞–≥–∏–Ω–æ–º</i> <a href="index.htm#op16">-rb</a>, <i>–∫–æ–≥–¥–∞ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –∫–ª—é—á–æ–º</i> <span class="comline">-dsl2</span> <i>–∏–ª–∏</i> <span class="comline">-dslm2</span></p>

  <p>–§–æ—Ä–º–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:<br />
  [[–º–∞—Å—Å–∏–≤ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏], [–º–∞—Å—Å–∏–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—à–∏–±–∫–∞—Ö]]</p>

  <p>–ú–∞—Å—Å–∏–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—à–∏–±–∫–∞—Ö:<br />
  [0] - ( –±–µ–∑ )<br />
  [1] - ) –±–µ–∑ (<br />
  [2] - { –±–µ–∑ }<br />
  [3] - } –±–µ–∑ {<br />
  [4] - –æ—à–∏–±–∫–∞: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —á–∞—Å—Ç–µ–π –±–æ–ª—å—à–µ 6<br />
  [5] - –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π @<br />
  [6] - –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π #<br />
  [7] - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ü–µ–ª–∏–∫–æ–º —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π —á–∞—Å—Ç–∏<br />
  [8] - –∏–º–µ—é—Ç—Å—è –ª–∏ –æ—à–∏–±–∫–∏ (true/false)</p>

  <p><span><a class="mark" href="#filtergls" id="filtergls" name="filtergls">#</a></span> <span class="comline">filter_gls_hw_list(str)</span></p>

  <p>–î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ GLS —Ñ–∞–π–ª–µ.</p>

  <p><i>–î—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —É–¥–∞–ª—è—é—Ç—Å—è.</i>
  </p>

  <p><i>–ü—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏.</i>
  </p>

  <p>–ü—Ä–∏–º–µ—Ä:</p>

  <p>–¥–æ)<br />
  <i>–∫–æ—Ç</i>|<i>–∫–æ—Ç–∞–º–∏</i>|<i>–∫–æ—Ç</i></p>

  <p>–ø–æ—Å–ª–µ)<br />
  <i>–∫–æ—Ç</i>|<i>–∫–æ—Ç–∞–º–∏</i> (–∞ –Ω–µ <i>–∫–æ—Ç–∞–º–∏</i>|<i>–∫–æ—Ç</i>)</p>

  <p><span><a class="mark" href="#fileexi" id="fileexi" name="fileexi">#</a></span> <span class="comline">fileExists(filePath)</span></p>

  <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞.</p>

  <p><span><a class="mark" href="#spinner" id="spinner_start" name="spinner_start">#</a></span> <span class="comline">spinner_start(msg, arr, time)<br />
  <span><a class="mark" href="#spinner" id="spinner_stop" name="spinner_stop">#</a></span> spinner_stop(id, msg)</span></p>

  <p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>

  <pre>
<span class="keyword">let</span> <span class="identifier">spin</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_start</span><span class="bold">(</span><span class="string">'Processing... %s'</span><span class="bold">, [</span><span class="string">'|'</span><span class="bold">, </span><span class="string">'/'</span><span class="bold">, </span><span class="string">'‚Äî'</span><span class="bold">, </span><span class="string">'\\'</span><span class="bold">,]);
</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_stop</span><span class="bold">(</span><span class="identifier">spin</span><span class="bold">, </span><span class="string">'Processing... Done\n'</span><span class="bold">);

</span><span class="keyword">let</span> <span class="identifier">spin</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_start</span><span class="bold">(</span><span class="string">'Checking... %s'</span><span class="bold">, [</span><span class="string">'‚ó¢'</span><span class="bold">, </span><span class="string">'‚ó£'</span><span class="bold">, </span><span class="string">'‚ó§'</span><span class="bold">, </span><span class="string">'‚ó•'</span><span class="bold">,]);
</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_stop</span><span class="bold">(</span><span class="identifier">spin</span><span class="bold">, </span><span class="string">'Checking... OK\n'</span><span class="bold">);

</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">spin</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_start</span><span class="bold">(</span><span class="string">'Loading... %s'</span><span class="bold">, [</span><span class="string">'...'</span><span class="bold">, </span><span class="string">'..'</span><span class="bold">, </span><span class="string">'.'</span><span class="bold">, </span><span class="string">''</span><span class="bold">,], </span><span class="numeric">400</span><span class="bold">);
</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_stop</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">spin</span><span class="bold">);

</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">spin</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_start</span><span class="bold">(</span><span class="string">'%s Loading...'</span><span class="bold">, [</span><span class="string">'üåí'</span><span class="bold">, </span><span class="string">'üåì'</span><span class="bold">, </span><span class="string">'üåî'</span><span class="bold">, </span><span class="string">'üåï'</span><span class="bold">,]);
</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_stop</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">spin</span><span class="bold">, </span><span class="string">'üåë Loading...\n'</span><span class="bold">);</span>
</pre>
  <p><span><a class="mark" href="#htmlcl" id="htmlcl" name="htmlcl">#</a></span> <span class="subs">–ú–æ–¥—É–ª—å htmlclean</span></p>

  <p>–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è <a href="https://github.com/anseki/htmlclean">github.com/anseki/htmlclean</a></p>

  <p><b>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</b>: <i>–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ HTML-–∏—Å—Ö–æ–¥–Ω–∏–∫–µ</i>.</p>

  <p><i>–í —Ü–µ–ª—è—Ö —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ –º–æ–¥—É–ª—è –±—ã–ª —É–¥–∞–ª—ë–Ω —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</i>.<br />
  <i>–î–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å HTML-–ø–∞—Ä—Å–µ—Ä–∞–º–∏ <b>parse5</b>, <b>htmlparser2</b> –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ</i>.</p>

  <p>–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä:</p>

  <pre>
<span class="keyword">const</span> <span class="identifier">htmlclean</span> <span class="operator">=</span> <span class="identifier">require</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utilspath</span> <span class="operator">+</span> <span class="string">'htmlclean.js'</span><span class="bold">).</span><span class="identifier">htmlclean</span><span class="bold">;

</span><span class="keyword">const</span> <span class="identifier">dirtyHtml</span> <span class="operator">=</span> <span class="identifier">String</span><span class="bold">.</span><span class="identifier">raw</span><span class="template">`
    &lt;h1&gt;     
      My First Heading&lt;/h1&gt;
    &lt;p&gt;
    My first    paragraph.
        &lt;/p&gt;
    &lt;b&gt;–±–æ–ª–¥ &lt;i&gt; –±–æ–ª–¥-–∫—É—Ä—Å–∏–≤ &lt;/i&gt; &lt;/b&gt; &lt;i&gt; –∫—É—Ä—Å–∏–≤ &lt;u&gt; –∫—É—Ä—Å–∏–≤-–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ &lt;/u&gt; &lt;/i&gt; &lt;u&gt; –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ &lt;/u&gt;

`</span><span class="bold">;

</span><span class="keyword">let</span> <span class="identifier">r</span> <span class="operator">=</span> <span class="identifier">htmlclean</span><span class="bold">(</span><span class="identifier">dirtyHtml</span><span class="bold">);
</span><span class="identifier">console</span><span class="bold">.</span><span class="identifier">log</span><span class="bold">(</span><span class="identifier">r</span><span class="bold">);

</span><span class="block-comment">/*

–†–µ–∑—É–ª—å—Ç–∞—Ç:
&lt;h1&gt; My First Heading&lt;/h1&gt;&lt;p&gt; My first paragraph.&lt;/p&gt; &lt;b&gt;–±–æ–ª–¥ &lt;i&gt;–±–æ–ª–¥-–∫—É—Ä—Å–∏–≤&lt;/i&gt;&lt;/b&gt; &lt;i&gt;–∫—É—Ä—Å–∏–≤ &lt;u&gt;–∫—É—Ä—Å–∏–≤-–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ&lt;/u&gt;&lt;/i&gt; &lt;u&gt;–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ&lt;/u&gt;

*/</span>
</pre>
  <p><span><a class="mark" href="#plug" id="plug" name="plug">#</a></span> <span class="subs">–ü–ª–∞–≥–∏–Ω—ã</span></p>

  <p>–î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π, –∫—Ä–æ–º–µ —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –∫–ª—é—á–∞–º–∏ <span class="comline">-rt, -re, -rd, -rg</span> –∏ <span class="comline">-rs</span> –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å javascript –∫–æ–¥–æ–º.</p>

  <p>–≠—Ç–∏ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ "<span class="comline">files/plugins</span>" –∏ –∏—Ö –∏–º–µ–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∫–ª—é—á–∞–º–∏ –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ "-".</p>

  <p>–ù–∞–ø—Ä–∏–º–µ—Ä:<br />
  node nodereplacer.js -<span class="comline">pile</span> input.txt output.txt - files/plugins/<span class="comline">pile.js</span><br />
  node nodereplacer.js -<span class="comline">susp</span> input.txt output.txt - files/plugins/<span class="comline">susp.js</span><br />
  node nodereplacer.js -<span class="comline">symb</span> input.txt output.txt - files/plugins/<span class="comline">symb.js</span></p>

  <p>–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ —Ç—Ä—ë—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ø—É—Å—Ç–∏–º—ã –ø—Ä–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:</p>

  <p>1) node nodereplacer.js -<span class="comline">–∫–ª—é—á1</span> -<span class="comline">–∫–ª—é—á2</span> input.txt output.txt<br />
  2) node nodereplacer.js -<span class="comline">–∫–ª—é—á1</span> input.txt output.txt<br />
  3) node nodereplacer.js -<span class="comline">–∫–ª—é—á1</span> -<span class="comline">–∫–ª—é—á2</span> output.txt<br />
  4) node nodereplacer.js -<span class="comline">–∫–ª—é—á1</span> input.txt<br />
  5) node nodereplacer.js -<span class="comline">–∫–ª—é—á1</span> output.txt</p>

  <p>–ü–µ—Ä–≤—ã–π –∫–ª—é—á - –∏–º—è —Ñ–∞–π–ª–∞ —Å –ø–ª–∞–≥–∏–Ω–æ–º –±–µ–∑ "-" –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.<br />
  –ü—Ä–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∏–º–µ–Ω–∞: <span class="comline">rt, re, rd, rg, rs</span></p>

  <p>–í—Ç–æ—Ä–æ–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>

  <p>–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —á–∏—Ç–∞–µ—Ç—Å—è –ø–æ—Å—Ç–∞—Ç–µ–π–Ω–æ (—Ä–µ–∂–∏–º <span class="comline">by_dsl_article</span>).</p>

  <p>–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —á—Ç–µ–Ω–∏—è (–ø–æ—Å—Ç—Ä–æ—á–Ω—ã–π, –ø–æ—Å—Ç–∞—Ç–µ–π–Ω—ã–π...) —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.</p>

  <p>–ß—Ç–æ–±—ã –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–º–µ–µ—Ç —Å–ª–æ–≤–∞—Ä–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã) –Ω–∞–¥–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–µ –ø–ª–∞–≥–∏–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:</p>

  <pre>
<span class="keyword">function</span> <span class="identifier">onstart</span><span class="bold">()
{
  </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">byline</span><span class="bold">();
}</span>
</pre>
  <p>–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞:</p>

  <p><b>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</b>: <i>–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤</i>.</p>

  <p><b>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</b>: <i>slist.js</i></p>

  <p>–≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ "<span class="comline">files/plugins</span>"</p>

  <p>–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:<br />
  <span class="comline">node nodereplacer.js -slist input.txt output.txt</span></p>

  <p><b>–ö–æ–¥</b>:</p>

  <pre>
<span class="line-comment">//–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–∞—è.</span>
<span class="keyword">function</span> <span class="identifier">onstart</span><span class="bold">()
{
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">byline</span><span class="bold">();
}

</span><span class="line-comment">//–†–µ–∂–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ —Å–∏–º–≤–æ–ª—ã.</span>
<span class="keyword">let</span> <span class="identifier">arr</span> <span class="operator">=</span> <span class="bold">[...</span>s<span class="bold">];</span>

<span class="line-comment">//—Ñ–∏–ª—å—Ç—Ä—É–µ–º.</span>
<span class="control-flow">while</span><span class="bold"> (</span><span class="identifier">arr</span> <span class="operator">!==</span> <span class="null">null</span> <span class="operator">&amp;&amp;</span> <span class="identifier">arr</span><span class="bold">.</span><span class="identifier">length</span> <span class="operator">!==</span> <span class="numeric">0</span><span class="bold">)
{
        </span><span class="keyword">const</span> <span class="identifier">c</span> <span class="operator">=</span> <span class="identifier">arr</span><span class="bold">.</span><span class="identifier">shift</span><span class="bold">();
        </span><span class="control-flow">if</span><span class="bold"> (</span><span class="regularexpression">/^[^\s]$/</span><span class="bold">.</span><span class="identifier">test</span><span class="bold">(</span><span class="identifier">c</span><span class="bold">))
                </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">tab</span><span class="bold">[</span><span class="identifier">c</span><span class="bold">] </span><span class="operator">=</span> <span class="string">''</span><span class="bold">;
}


</span><span class="line-comment">//–ß—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ –±—ã–ª–∞ –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª.</span>
<span class="identifier">s</span> <span class="operator">=</span> <span class="null">null</span><span class="bold">;

</span><span class="line-comment">//–ü–µ—Ä–µ–Ω–æ—Å–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤ o.res –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º.</span>
<span class="keyword">function</span> <span class="identifier">onexit</span><span class="bold">()
{
        </span><span class="control-flow">for</span><span class="bold"> (</span><span class="keyword">let</span> <span class="identifier">key</span> <span class="control-flow">in</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">tab</span><span class="bold">)
        {
                </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">res</span><span class="bold">.</span><span class="identifier">push</span><span class="bold">(</span><span class="identifier">key</span><span class="bold">);
        }

        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">res</span><span class="bold">.</span><span class="identifier">sort</span><span class="bold">();
}</span>
</pre>
  <p><i>–í–æ–∑–º–æ–∂–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</i>:</p>

  <pre>
b
d
g
i
o
p
r
–ò —Ç. –¥.
</pre>
  <p><span><a class="mark" href="#test" id="test" name="test">#</a></span> <span class="subs">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span></p>

  <p><a href="tester.htm">–ù–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</a>.</p>

  <p><span><a class="mark" href="#exam" id="exam" name="exam">#</a></span> <span class="subs">–ü—Ä–∏–º–µ—Ä—ã –∏ —Å–Ω–∏–ø–ø–µ—Ç—ã</span></p>

  <p>–ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø–∞–ø–∫–µ <i>/nodereplacer/files/snippets</i></p>

  <p><span><a class="mark" href="#npmjs" id="npmjs" name="npmjs">#</a></span> <span class="subs">–í–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏ (npmjs.com)</span></p>

  <p>–í–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é (—Å–º. <i>package.json</i>):</p>

  <ul>
    <li><a href="https://www.npmjs.com/package/sanitize-html">sanitize-html</a>
    </li>

    <li><a href="https://github.com/ashtuchkin/iconv-lite">iconv-lite</a>
    </li>

    <li><a href="https://github.com/cheeriojs/cheerio">cheerio</a>
    </li>

    <li><a href="https://github.com/jquery/esprima">esprima</a>
    </li>

    <li><a href="https://www.npmjs.com/package/mime">mime</a>
    </li>

    <li><a href="https://www.npmjs.com/package/parse5-utils">parse5-utils</a>
    </li>

    <li><a href="https://www.npmjs.com/package/stringify-object">stringify-object</a>
    </li>
  </ul>

  <p>–í–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:</p>

  <p><a href="https://www.npmjs.com/package/@types/npm">@types</a>, <a href="https://www.npmjs.com/package/array-uniq">array-uniq</a>, <a href="https://www.npmjs.com/package/boolbase">boolbase</a>, <a href="https://www.npmjs.com/package/core-util-is">core-util-is</a>, <a href="https://www.npmjs.com/package/css-select">css-select</a>, <a href="https://www.npmjs.com/package/css-what">css-what</a>, <a href="https://www.npmjs.com/package/dom-serializer">dom-serializer</a>, <a href="https://www.npmjs.com/package/domelementtype">domelementtype</a>, <a href="https://www.npmjs.com/package/domhandler">domhandler</a>, <a href="https://www.npmjs.com/package/domutils">domutils</a>, <a href="https://www.npmjs.com/package/entities">entities</a>, <a href="https://www.npmjs.com/package/esprima">esprima</a>, <a href="https://www.npmjs.com/package/get-own-enumerable-property-symbols">get-own-enumerable-property-symbols</a>, <a href="https://www.npmjs.com/package/htmlparser2">htmlparser2</a>, <a href="https://www.npmjs.com/package/inherits">inherits</a>, <a href="https://www.npmjs.com/package/is-obj">is-obj</a>, <a href="https://www.npmjs.com/package/is-regexp">is-regexp</a>, <a href="https://www.npmjs.com/package/isarray">isarray</a>, <a href="https://www.npmjs.com/package/lodash">lodash</a>, <a href="https://www.npmjs.com/package/lodash.escaperegexp">lodash.escaperegexp</a>, <a href="https://www.npmjs.com/package/nth-check">nth-check</a>, <a href="https://www.npmjs.com/package/number-is-nan">number-is-nan</a>, <a href="https://www.npmjs.com/package/parse5">parse5</a>, <a href="https://www.npmjs.com/package/process-nextick-args">process-nextick-args</a>, <a href="https://www.npmjs.com/package/readable-stream">readable-stream</a>, <a href="https://www.npmjs.com/package/safe-buffer">safe-buffer</a>, <a href="https://www.npmjs.com/package/srcset">srcset</a>, <a href="https://www.npmjs.com/package/string_decoder">string_decoder</a>, <a href="https://www.npmjs.com/package/util-deprecate">util-deprecate</a>, <a href="https://www.npmjs.com/package/xtend">xtend</a></p>

  <p><span><a class="mark" href="#other" id="other" name="other">#</a></span> <span class="subs">–†–∞–∑–Ω–æ–µ</span></p>

  <p><span><a class="mark" href="#unipb" id="unipb" name="unipb">#</a></span> –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –ò–ù–î–ò–ö–ê–¢–û–† –ü–†–û–ì–†–ï–°–°–ê</p>

  <p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</p>

  <pre>
<span class="keyword">const</span> <span class="identifier">pb</span> <span class="operator">=</span> <span class="identifier">require</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utilspath</span><span class="bold">).</span><span class="identifier">progressbar</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">arr</span><span class="bold">.</span><span class="identifier">length</span><span class="bold">, </span><span class="numeric">1</span><span class="bold">);
</span><span class="identifier">pb</span><span class="bold">.</span><span class="identifier">start</span><span class="bold">();

</span><span class="control-flow">for</span><span class="bold"> (</span><span class="keyword">let</span> <span class="identifier">i</span> <span class="operator">=</span> <span class="numeric">0</span><span class="bold">; </span><span class="identifier">i</span> <span class="operator">&lt;</span> <span class="identifier">arr</span><span class="bold">.</span><span class="identifier">length</span><span class="bold">; </span><span class="identifier">i</span><span class="operator">++</span><span class="bold">)
{
        </span><span class="identifier">pb</span><span class="bold">.</span><span class="identifier">stat</span> <span class="operator">=</span> <span class="identifier">i</span><span class="bold">;
}

</span><span class="identifier">pb</span><span class="bold">.</span><span class="identifier">end</span><span class="bold">();</span>
</pre>
  <p>–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ <span class="comline">progressbar</span> –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - 0.</p>

  <p>–ó–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ–æ—Ä–º–∞—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏, 0 - –ø–æ–ª–Ω–∞—è, 1 - –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è.</p>

  <p><span><a class="mark" href="#mmem" id="mmem" name="mmem">#</a></span> –ú–û–î–£–õ–¨ –î–õ–Ø –ò–ó–ú–ï–†–ï–ù–ò–Ø –ü–û–¢–†–ï–ë–õ–ï–ù–ò–Ø –ü–ê–ú–Ø–¢–ò</p>

  <p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</p>

  <pre>
<span class="keyword">function</span> <span class="identifier">onstart</span><span class="bold">()
{

        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">mem</span> <span class="operator">=</span> <span class="identifier">require</span><span class="bold">(</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utilspath</span> <span class="operator">+</span> <span class="string">'memory.js'</span><span class="bold">).</span><span class="identifier">mem</span><span class="bold">(</span><span class="numeric">100</span><span class="bold">);
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">mem</span><span class="bold">.</span><span class="identifier">start</span><span class="bold">();
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">byline</span><span class="bold">();

}

</span><span class="keyword">function</span> <span class="identifier">onexit</span><span class="bold">()
{
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">mem</span><span class="bold">.</span><span class="identifier">stop</span><span class="bold">();
        </span><span class="identifier">console</span><span class="bold">.</span><span class="identifier">log</span><span class="bold">(</span><span class="string">'\nMemory Usage (max rss): '</span> <span class="operator">+</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">mem</span><span class="bold">.</span><span class="identifier">get</span><span class="bold">());

}</span>
</pre>
  <p>–ò–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑–º–µ—Ä–µ–Ω–∏–π –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π, –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ - 100 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥</p>

  <p>–†–µ–∑—É–ª—å—Ç–∞—Ç - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç (–ø–æ–π–º–∞–Ω) –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏—è (–∞ –Ω–µ —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å).</p>

  <p><span><a class="mark" href="#eol1" id="eol1" name="eol1">#</a></span> –°–û–•–†–ê–ù–ï–ù–ò–ï –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–• –†–ê–ó–î–ï–õ–ò–¢–ï–õ–ï–ô –°–¢–†–û–ö</p>

  <p><b>–í–Ω–∏–º–∞–Ω–∏–µ!</b> –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —á—Ç–µ–Ω–∏—è.</p>

  <p>–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ: \n, \r, \r\n</p>

  <p>–ù–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ Windows –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–±–æ —Ç–æ–ª—å–∫–æ \r\n –∏–ª–∏ \n –Ω–∞ Linux.</p>

  <p>–ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:</p>

  <pre>
<span class="keyword">function</span> <span class="identifier">onstart</span><span class="bold">()
{
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">eol_mode</span> <span class="operator">=</span> <span class="numeric">1</span><span class="bold">;
        </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">byline</span><span class="bold">();
}</span>
</pre>
  <p><span><a class="mark" href="#eol2" id="eol2" name="eol2">#</a></span> –ó–ê–ü–£–°–ö –ê–°–ò–ù–•–†–û–ù–ù–û–ì–û –ö–û–î–ê –ü–û–°–õ–ï –ü–†–û–ß–¢–ï–ù–ò–Ø –í–•–û–î–ù–û–ì–û –§–ê–ô–õ–ê</p>

  <p><b>–í–Ω–∏–º–∞–Ω–∏–µ!</b> –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —á—Ç–µ–Ω–∏—è.</p>

  <p>–ü—Ä–∏–º–µ—Ä:</p>

  <pre>
<span class="identifier">s</span> <span class="operator">=</span> <span class="null">null</span><span class="bold">;


</span><span class="keyword">async</span> <span class="keyword">function</span> <span class="identifier">onexit_async</span><span class="bold">()
{

        </span><span class="keyword">function</span> <span class="identifier">processpage</span><span class="bold">()
        {

                </span><span class="control-flow">try</span><span class="bold">
                {

                        </span><span class="keyword">let</span> <span class="identifier">title</span> <span class="operator">=</span> <span class="identifier">document</span><span class="bold">.</span><span class="identifier">getElementsByTagName</span><span class="bold">(</span><span class="string">'title'</span><span class="bold">);
                        </span><span class="control-flow">return</span>  <span class="identifier">title</span><span class="bold">[</span><span class="numeric">0</span><span class="bold">].</span><span class="identifier">innerHTML</span><span class="bold">;  

                }
                </span><span class="control-flow">catch</span><span class="bold">(</span><span class="identifier">e</span><span class="bold">)
                {
                        </span><span class="control-flow">return</span> <span class="identifier">e</span><span class="bold">.</span><span class="identifier">message</span><span class="bold">;
                }

        }

        </span><span class="control-flow">try</span><span class="bold">
        {

                </span><span class="keyword">const</span> <span class="identifier">puppeteer</span> <span class="operator">=</span> <span class="identifier">require</span><span class="bold">(</span><span class="string">'puppeteer'</span><span class="bold">);
                </span><span class="identifier">console</span><span class="bold">.</span><span class="identifier">log</span><span class="bold">(</span><span class="string">'\n'</span><span class="bold">);
                </span><span class="keyword">let</span> <span class="identifier">spin</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_start</span><span class="bold">(</span><span class="string">'Processing... %s'</span><span class="bold">, [</span><span class="string">'|'</span><span class="bold">, </span><span class="string">'/'</span><span class="bold">, </span><span class="string">'‚Äî'</span><span class="bold">, </span><span class="string">'\\'</span><span class="bold">,]);
                </span><span class="keyword">const</span> <span class="identifier">browser</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="identifier">puppeteer</span><span class="bold">.</span><span class="identifier">launch</span><span class="bold">({</span><span class="identifier">args</span><span class="bold"><span class="operator">:</span><span class="bold"> [</span></span><span class="string">'--no-sandbox'</span><span class="bold">, </span><span class="string">'--disable-setuid-sandbox'</span><span class="bold">]});
                </span><span class="keyword">const</span> <span class="identifier">page</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="identifier">browser</span><span class="bold">.</span><span class="identifier">newPage</span><span class="bold">();

                </span><span class="control-flow">while</span><span class="bold"> (</span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">idata</span><span class="bold">.</span><span class="identifier">next</span><span class="bold">())
                {
                  </span><span class="keyword">let</span> <span class="identifier">v</span> <span class="operator">=</span> <span class="identifier">o</span><span class="bold">.</span><span class="identifier">idata</span><span class="bold">.</span><span class="identifier">get</span><span class="bold">();
                  </span><span class="keyword">await</span> <span class="identifier">page</span><span class="bold">.</span><span class="identifier">setContent</span><span class="bold">(</span><span class="identifier">v</span><span class="bold">, { </span><span class="identifier">waitUntil</span><span class="bold operator">: </span><span class="string">'domcontentloaded'</span><span class="bold"> });
                  </span><span class="keyword">let</span> <span class="identifier">str</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="identifier">page</span><span class="bold">.</span><span class="identifier">evaluate</span><span class="bold">(</span><span class="identifier">processpage</span><span class="bold">);
                  </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">idata</span><span class="bold">.</span><span class="identifier">write</span><span class="bold">(</span><span class="identifier">str</span><span class="bold">);

                }

                </span><span class="identifier">browser</span><span class="bold">.</span><span class="identifier">close</span><span class="bold">();  
                </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">utils</span><span class="bold">.</span><span class="identifier">spinner_stop</span><span class="bold">(</span><span class="identifier">spin</span><span class="bold">, </span><span class="string">'Processing... Done\n'</span><span class="bold">);
                </span><span class="identifier">o</span><span class="bold">.</span><span class="identifier">et_show</span><span class="bold">();

        }
        </span><span class="control-flow">catch</span><span class="bold">(</span><span class="identifier">e</span><span class="bold">)
        {
                </span><span class="identifier">console</span><span class="bold">.</span><span class="identifier">log</span><span class="bold">(</span><span class="identifier">e</span><span class="bold">.</span><span class="identifier">message</span><span class="bold">);
        }

}</span>
</pre>
  <p>–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –∫–æ–¥—É:</p>

  <p>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —á—Ç–µ–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–º–µ–Ω –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∏–º–µ–Ω–µ–º <span class="comline">onexit_async</span></p>

  <p>–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:</p>

  <ul>
    <li>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è <span class="comline">o.eol_mode</span> –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <b>2</b></li>

    <li>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è <span class="comline">o.et_auto</span> - <b>false</b></li>

    <li>–í —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ, –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ–Ω –∏–ª–∏ –ø–ª–∞–≥–∏–Ω, —Ñ—É–Ω–∫—Ü–∏—è <span class="comline">onexit_async</span> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.</li>
  </ul>

  <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö <span class="comline">o.eol_mode</span> –∏ <span class="comline">o.et_auto</span> –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –∑–∞–ø—É—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ <span class="comline">onstart</span></p>

  <p>–ü–æ—ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Ö –º–æ–∂–Ω–æ –µ—â—ë –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ —ç—Ç–æ –Ω—É–∂–Ω–æ –≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –≤ —Ñ–∞–π–ª–µ <i>nodereplacer/files/snippets/examples/pupperteer2.js</i>)</p>

  <p>–ï—Å–ª–∏ <span class="comline">o.eol_mode</span> —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ <b>2</b>, –∫–∞–∫ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, —Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–Ω–∞–Ω–∞ –∫–∞—Ä—Ç–∞ —Å–º–µ—â–µ–Ω–∏–π –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –æ–±—ä–µ–∫—Ç <span class="comline">o.idata</span></p>

  <p>–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –Ω–µ —Ä–∞–Ω—å—à–µ, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–ª–∏—Å—Ç–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ <span class="comline">next</span> —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.</p>

  <p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–¥ –∫–ª–∞—Å—Å–∞ <span class="comline">offset_eol</span> –≤ —Ñ–∞–π–ª–µ <i>nodereplacer.js</i></p>

  <p>–§—É–Ω–∫—Ü–∏—è <span class="comline">onexit_async</span> –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á—Ç–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ <span class="comline">o.repeat</span> –≤ —Ñ—É–Ω–∫—Ü–∏–∏ <span class="comline">onexit</span></p>

  <hr />
</body>
</html>